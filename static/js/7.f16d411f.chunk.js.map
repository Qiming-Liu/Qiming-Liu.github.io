{"version":3,"sources":["pages/Home/sphereFragShader.js","pages/Home/sphereVertShader.js","../node_modules/@babel/runtime/helpers/esm/construct.js","pages/Home/DisplacementSphere.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","utils/three.js"],"names":["Parent","args","Class","isNativeReflectConstruct","Reflect","construct","bind","a","push","apply","instance","Function","setPrototypeOf","prototype","arguments","DisplacementSphere","props","theme","useTheme","rgbBackground","themeId","colorWhite","start","useRef","Date","now","canvasRef","mouse","renderer","camera","scene","lights","uniforms","material","geometry","sphere","tweenRef","sphereSpring","prefersReducedMotion","usePrefersReducedMotion","isInViewport","useInViewport","windowSize","useWindowSize","useEffect","window","innerWidth","innerHeight","current","Vector2","WebGLRenderer","canvas","antialias","powerPreference","setSize","setPixelRatio","outputEncoding","sRGBEncoding","PerspectiveCamera","position","z","Scene","MeshPhongMaterial","onBeforeCompile","shader","UniformsUtils","merge","UniformsLib","time","type","value","vertexShader","vertShader","fragmentShader","fragShader","SphereBufferGeometry","Mesh","modifier","Math","random","add","cleanScene","cleanRenderer","dirLight","DirectionalLight","ambientLight","AmbientLight","x","y","background","Color","rgbToThreeColor","forEach","light","removeLights","width","height","adjustedHeight","aspect","updateProjectionMatrix","render","media","mobile","tablet","onMouseMove","event","rotation","clientX","clientY","toArray","values","set","spring","from","get","to","stiffness","damping","velocity","getVelocity","mass","restSpeed","addEventListener","removeEventListener","stop","animation","animate","requestAnimationFrame","undefined","cancelAnimationFrame","Transition","appear","in","onEnter","reflow","timeout","status","className","classNames","ref","_regeneratorRuntime","exports","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_typeof","traverse","isMesh","dispose","isMaterial","cleanMaterial","forceContextLoss","parent","remove"],"mappings":"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","file":"static/js/7.f16d411f.chunk.js","sourcesContent":["export default `\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform float time;\nvarying vec2 vUv;\nvarying vec3 newPosition;\nvarying float noise;\n\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <envmap_physical_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec3 color = vec3(vUv * (0.2 - 1.7 * noise), 1.0);\n  vec3 finalColors = vec3(color.g * 2.5 , color.r * 3.5 , color.b * 0.1);\n  vec4 diffuseColor = vec4(cos(finalColors * noise * 3.0), 1.0);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphamap_fragment>\n  #include <alphatest_fragment>\n  #include <specularmap_fragment>\n  #include <normal_fragment_begin>\n  #include <normal_fragment_maps>\n  #include <emissivemap_fragment>\n  #include <lights_phong_fragment>\n  #include <lights_fragment_begin>\n  #include <lights_fragment_maps>\n  #include <lights_fragment_end>\n  #include <aomap_fragment>\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  #include <envmap_fragment>\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n}\n`;\n","//\n// GLSL textureless classic 3D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nexport default `\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\nfloat turbulence(vec3 p) {\n  float w = 100.0;\n  float t = -.5;\n  for (float f = 1.0 ; f <= 10.0 ; f++) {\n    float power = pow(2.0, f);\n    t += abs(pnoise(vec3(power * p), vec3(10.0, 10.0, 10.0)) / power);\n  }\n  return t;\n}\n\n// START\nuniform float time;\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying float noise;\n\nvarying vec3 vViewPosition;\n\nvoid main() {\n  #include <beginnormal_vertex>\n  #include <defaultnormal_vertex>\n  #include <begin_vertex>\n  #include <project_vertex>\n  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n    vNormal = normalize(transformedNormal);\n  #endif\n\n  vViewPosition = - mvPosition.xyz;\n\n  vUv = uv;\n\n  noise = turbulence(0.01 * position + normal + time * 0.8);\n  vec3 displacement = vec3((position.x) * noise, position.y * noise, position.z * noise);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4((position + normal) + displacement, 1.0);\n}\n`;\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import './DisplacementSphere.css';\n\nimport classNames from 'classnames';\nimport { useTheme } from 'components/ThemeProvider';\nimport { useInViewport, usePrefersReducedMotion, useWindowSize } from 'hooks';\nimport { spring, value } from 'popmotion';\nimport { useEffect, useRef } from 'react';\nimport { Transition } from 'react-transition-group';\nimport {\n  AmbientLight,\n  Color,\n  DirectionalLight,\n  Mesh,\n  MeshPhongMaterial,\n  PerspectiveCamera,\n  Scene,\n  SphereBufferGeometry,\n  UniformsLib,\n  UniformsUtils,\n  Vector2,\n  WebGLRenderer,\n  sRGBEncoding,\n} from 'three';\nimport { media, rgbToThreeColor } from 'utils/style';\nimport { cleanRenderer, cleanScene, removeLights } from 'utils/three';\nimport { reflow } from 'utils/transition';\nimport fragShader from './sphereFragShader';\nimport vertShader from './sphereVertShader';\n\nconst DisplacementSphere = props => {\n  const theme = useTheme();\n  const { rgbBackground, themeId, colorWhite } = theme;\n  const start = useRef(Date.now());\n  const canvasRef = useRef();\n  const mouse = useRef();\n  const renderer = useRef();\n  const camera = useRef();\n  const scene = useRef();\n  const lights = useRef();\n  const uniforms = useRef();\n  const material = useRef();\n  const geometry = useRef();\n  const sphere = useRef();\n  const tweenRef = useRef();\n  const sphereSpring = useRef();\n  const prefersReducedMotion = usePrefersReducedMotion();\n  const isInViewport = useInViewport(canvasRef);\n  const windowSize = useWindowSize();\n\n  useEffect(() => {\n    const { innerWidth, innerHeight } = window;\n    mouse.current = new Vector2(0.8, 0.5);\n    renderer.current = new WebGLRenderer({\n      canvas: canvasRef.current,\n      antialias: false,\n      powerPreference: 'high-performance',\n    });\n    renderer.current.setSize(innerWidth, innerHeight);\n    renderer.current.setPixelRatio(1);\n    renderer.current.outputEncoding = sRGBEncoding;\n\n    camera.current = new PerspectiveCamera(54, innerWidth / innerHeight, 0.1, 100);\n    camera.current.position.z = 52;\n\n    scene.current = new Scene();\n\n    material.current = new MeshPhongMaterial();\n    material.current.onBeforeCompile = shader => {\n      uniforms.current = UniformsUtils.merge([\n        UniformsLib['ambient'],\n        UniformsLib['lights'],\n        shader.uniforms,\n        { time: { type: 'f', value: 0 } },\n      ]);\n\n      shader.uniforms = uniforms.current;\n      shader.vertexShader = vertShader;\n      shader.fragmentShader = fragShader;\n    };\n\n    geometry.current = new SphereBufferGeometry(32, 128, 128);\n\n    sphere.current = new Mesh(geometry.current, material.current);\n    sphere.current.position.z = 0;\n    sphere.current.modifier = Math.random();\n    scene.current.add(sphere.current);\n\n    return () => {\n      cleanScene(scene.current);\n      cleanRenderer(renderer.current);\n    };\n  }, []);\n\n  useEffect(() => {\n    const dirLight = new DirectionalLight(colorWhite, 0.6);\n    const ambientLight = new AmbientLight(colorWhite, themeId === 'light' ? 0.8 : 0.1);\n\n    dirLight.position.z = 200;\n    dirLight.position.x = 100;\n    dirLight.position.y = 100;\n\n    lights.current = [dirLight, ambientLight];\n    scene.current.background = new Color(...rgbToThreeColor(rgbBackground));\n    lights.current.forEach(light => scene.current.add(light));\n\n    return () => {\n      removeLights(lights.current);\n    };\n  }, [rgbBackground, colorWhite, themeId]);\n\n  useEffect(() => {\n    const { width, height } = windowSize;\n\n    const adjustedHeight = height + height * 0.3;\n    renderer.current.setSize(width, adjustedHeight);\n    camera.current.aspect = width / adjustedHeight;\n    camera.current.updateProjectionMatrix();\n\n    // Render a single frame on resize when not animating\n    if (prefersReducedMotion) {\n      renderer.current.render(scene.current, camera.current);\n    }\n\n    if (width <= media.mobile) {\n      sphere.current.position.x = 14;\n      sphere.current.position.y = 10;\n    } else if (width <= media.tablet) {\n      sphere.current.position.x = 18;\n      sphere.current.position.y = 14;\n    } else {\n      sphere.current.position.x = 22;\n      sphere.current.position.y = 16;\n    }\n  }, [prefersReducedMotion, windowSize]);\n\n  useEffect(() => {\n    const onMouseMove = event => {\n      const { rotation } = sphere.current;\n\n      const position = {\n        x: event.clientX / window.innerWidth,\n        y: event.clientY / window.innerHeight,\n      };\n\n      if (!sphereSpring.current) {\n        sphereSpring.current = value(rotation.toArray(), values =>\n          rotation.set(values[0], values[1], sphere.current.rotation.z)\n        );\n      }\n\n      tweenRef.current = spring({\n        from: sphereSpring.current.get(),\n        to: [position.y / 2, position.x / 2],\n        stiffness: 30,\n        damping: 20,\n        velocity: sphereSpring.current.getVelocity(),\n        mass: 2,\n        restSpeed: 0.0001,\n      }).start(sphereSpring.current);\n    };\n\n    if (!prefersReducedMotion && isInViewport) {\n      window.addEventListener('mousemove', onMouseMove);\n    }\n\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      tweenRef.current?.stop();\n    };\n  }, [isInViewport, prefersReducedMotion]);\n\n  useEffect(() => {\n    let animation;\n\n    const animate = () => {\n      animation = requestAnimationFrame(animate);\n\n      if (uniforms.current !== undefined) {\n        uniforms.current.time.value = 0.00005 * (Date.now() - start.current);\n      }\n\n      sphere.current.rotation.z += 0.001;\n      renderer.current.render(scene.current, camera.current);\n    };\n\n    if (!prefersReducedMotion && isInViewport) {\n      animate();\n    } else {\n      renderer.current.render(scene.current, camera.current);\n    }\n\n    return () => {\n      cancelAnimationFrame(animation);\n    };\n  }, [isInViewport, prefersReducedMotion]);\n\n  return (\n    <Transition appear in onEnter={reflow} timeout={3000}>\n      {status => (\n        <canvas\n          aria-hidden\n          className={classNames('displacement-sphere', `displacement-sphere--${status}`)}\n          ref={canvasRef}\n          {...props}\n        />\n      )}\n    </Transition>\n  );\n};\n\nexport default DisplacementSphere;\n","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","/**\n * Clean up a scene's materials and geometry\n */\nexport const cleanScene = scene => {\n  scene.traverse(object => {\n    if (!object.isMesh) return;\n\n    object.geometry.dispose();\n\n    if (object.material.isMaterial) {\n      cleanMaterial(object.material);\n    } else {\n      for (const material of object.material) {\n        cleanMaterial(material);\n      }\n    }\n  });\n};\n\n/**\n * Clean up and dispose of a material\n */\nexport const cleanMaterial = material => {\n  material.dispose();\n\n  for (const key of Object.keys(material)) {\n    const value = material[key];\n    if (value && typeof value === 'object' && 'minFilter' in value) {\n      value.dispose();\n    }\n  }\n};\n\n/**\n * Clean up and dispose of a renderer\n */\nexport const cleanRenderer = renderer => {\n  renderer.dispose();\n  renderer.forceContextLoss();\n  renderer = null;\n};\n\n/**\n * Clean up lights by removing them from their parent\n */\nexport const removeLights = lights => {\n  for (const light of lights) {\n    light.parent.remove(light);\n  }\n};\n"],"sourceRoot":""}